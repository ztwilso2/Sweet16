<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>StudyBuddies</title>
    <link rel="stylesheet" type="text/css" href="StyleSheet1.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">

        function goToLogOn() {
            window.location.assign("./loginPage.html")
        }

        //LogOffFunction
        function LogOff() {

            var webMethod = "ProjectServices.asmx/LogOff";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d) {
                        //we logged off, so go back to logon page,
                        //stop checking messages
                        //and clear the chat panel
                        goToLogOn();
                        
                    }
                    else {
                    }
                },
                error: function (e) {
                    alert("Error with the server. Please try again.");
                }
            });
        }
        function newEvent() {
            var webMethod = "ProjectServices.asmx/NewEvent";
            var className = $('#newClassName').val();
            var desc = $('#newDesc').val();
            var date = $('#newDate').val();
            var time = $('#newTime').val();
            var location = $('#newLocation').val();
            var parameters = "{\"className\":\"" + encodeURI(className) + "\",\"desc\":\"" + encodeURI(desc) + "\",\"date\":\"" + encodeURI(date) + "\",\"time\":\"" + encodeURI(time) + "\",\"location\":\"" + encodeURI(location)+"\"}";
            alert(time);
            alert(location);
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    alert("Event added.");
                    goToLogOn();
                },
                error: function (e) {
                    alert("An error was encountered. Please try again.");
                }
            });
        }
    </script>
</head>
<body>
    <header>
        <div class="header">
            <h1>StudyBuddies</h1>
            <p>No More Studying Alone</p>
            <nav>
                <ul>
                    <li onclick="LogOff()"><a href="">Logout</a></li>
                    <li><a href="homepage.html">Home</a></li>
                    <li><a href="">Profile</a></li>
                    <li></li>
                </ul>
            </nav>
        </div>
    </header>
    <section id="layout">
        <article id="create">
            <h2>Create an Event:</h2>
            <form>
                <table id="createForm">
                    <tr>
                        <td>Class Name</td>
                        <td><input id="newClassName" type="text" /></td>
                    </tr>
                    <tr>
                        <td>Description</td>
                        <td>
                            <select id="newDesc">
                                <option value="test review">Test Review</option>
                                <option value="homework review">Homework Review</option>
                                <option value="Study session">Study Session</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Date</td>
                        <td>
                            <input type="date" id="newDate" name="trip-start"
                                   value="2020-02-20"
                                   min="2020-02-02" max="2022-12-31">
                        </td>
                    </tr>
                    <tr>
                        <td>Time</td>
                        <td>
                            <select id="newTime">
                                <option value="7:30AM">7:30 AM</option>
                                <option value="8:00AM">8:00 AM</option>
                                <option value="8:30">8:30 AM</option>
                                <option value="9:00">9:00 AM</option>
                                <option value="9:30">9:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="1:00">1:00 PM</option>
                                <option value="1:30">1:30 PM</option>
                                <option value="2:00">2:00 PM</option>
                                <option value="2:30">2:30 PM</option>
                                <option value="3:00">3:00 PM</option>
                                <option value="3:30">3:30 PM</option>
                                <option value="4:00">4:00 PM</option>
                                <option value="4:30">4:30 PM</option>
                                <option value="5:00">5:00 PM</option>
                                <option value="5:30">5:30 PM</option>
                                <option value="6:00">6:00 PM</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Location</td>
                        <td>
                            <select id="newLocation">
                                <option value="wpcSb">WPC Starbucks</option>
                                <option value="muSb">MU Starbucks</option>
                                <option value="hayden">Hayden Library</option>
                                <option value="noble">Noble Library</option>
                                <option value="pavilion">Student Pavilion</option>
                            </select>
                        </td>
                    </tr>
                    <tr><td><button type="button" onclick="newEvent()">Create</button> </td></tr>
                </table>

            </form>
        </article>

        <article id="messages">
            This is the message board
            <p>Hi!!!!</p>
        </article>


        <aside id="eventBar">
            <form action="/" method="post">
                <h3>Upcoming Events!</h3>
                <table>
                    <tr>
                        <td>Events will print here</td>
                    </tr>
                </table>
            </form>
        </aside>

    </section>

</body>
</html>
